"use strict";angular.module("axismakerApp",["ngCookies","ngResource","ngSanitize","ui.router","ui.bootstrap","ngPostMessage","slick"]).config(["$stateProvider","$urlRouterProvider","$locationProvider","$httpProvider",function(a,b,c,d){b.otherwise("/"),c.html5Mode(!0),d.interceptors.push("authInterceptor"),a.state("main",{url:"/",templateUrl:"app/main/main.html",controller:"MainCtrl"}).state("new",{url:"/new",templateUrl:"app/main/new/new.html",controller:"NewCtrl"}).state("edit",{url:"/edit",templateUrl:"app/main/edit/edit.html",controller:"EditCtrl"}).state("edit_item",{url:"/edit/:item",templateUrl:"app/main/edit/edit.html",controller:"EditCtrl"})}]).factory("authInterceptor",["$rootScope","$q","$cookieStore","$location",function(a,b,c,d){return{request:function(a){return a.headers=a.headers||{},c.get("token")&&(a.headers.Authorization="Bearer "+c.get("token")),a},responseError:function(a){return 401===a.status?(d.path("/login"),c.remove("token"),b.reject(a)):b.reject(a)}}}]).run(["$rootScope","$location","Auth",function(a,b,c){a.$on("$stateChangeStart",function(a,d){c.isLoggedInAsync(function(a){d.authenticate&&!a&&b.path("/login")})})}]),angular.module("axismakerApp").config(["$stateProvider",function(a){a.state("login",{url:"/login",templateUrl:"app/account/login/login.html",controller:"LoginCtrl"}).state("signup",{url:"/signup",templateUrl:"app/account/signup/signup.html",controller:"SignupCtrl"}).state("settings",{url:"/settings",templateUrl:"app/account/settings/settings.html",controller:"SettingsCtrl",authenticate:!0})}]),angular.module("axismakerApp").controller("LoginCtrl",["$scope","Auth","$location","$window",function(a,b,c,d){a.user={},a.errors={},a.login=function(d){a.submitted=!0,d.$valid&&b.login({email:a.user.email,password:a.user.password}).then(function(){c.path("/")})["catch"](function(b){a.errors.other=b.message})},a.loginOauth=function(a){d.location.href="/auth/"+a}}]),angular.module("axismakerApp").controller("SettingsCtrl",["$scope","User","Auth","$q",function(a,b,c){b.get().$promise.then(function(b){var c=b.githubToken;a.currentRepoURI=b.repoURI;var d=new Github({token:c,auth:"oauth"}),e=d.getUser();e.repos(function(b,c){var d=[];if(c){if(angular.forEach(c,function(a){!a.fork&&a.permissions.push&&a.permissions.pull&&d.push(a)}),a.currentRepoURI){var e=d.filter(function(b){return b.git_url===a.currentRepoURI}),f=d.filter(function(b){return b.git_url!==a.currentRepoURI});e.length&&f.unshift(e[0]),d=f}a.writableRepos=d,a.$apply()}})});a.showNewRepo=!1,a.createNewRepo=function(b){var c=b.length?b:"undefined"!=typeof a.newRepoName?a.newRepoName:void 0;c&&githubUser.createRepo({name:c},function(b,c){if(b)a.newRepoMessages=b;else{var d=c.git_url;a.changeRepo(d)}})},a.changeRepo=function(b){b&&c.changeRepo(b).then(function(){a.message="Repo successfully changed.",a.currentRepoURI=b})["catch"](function(){a.errors.other="???"})}}]),angular.module("axismakerApp").controller("SignupCtrl",["$scope","Auth","$location","$window",function(a,b,c,d){a.user={},a.errors={},a.loginOauth=function(a){d.location.href="/auth/"+a}}]),angular.module("axismakerApp").controller("AdminCtrl",["$scope","$http","Auth","User",function(a,b,c,d){a.users=d.query(),a["delete"]=function(b){d.remove({id:b._id}),angular.forEach(a.users,function(c,d){c===b&&a.users.splice(d,1)})}}]),angular.module("axismakerApp").config(["$stateProvider",function(a){a.state("admin",{url:"/admin",templateUrl:"app/admin/admin.html",controller:"AdminCtrl"})}]),angular.module("axismakerApp").controller("EditCtrl",["$scope","$window","$location","Auth","$stateParams","$modal","$http","$compile",function(a,b,c,d,e,f,g){var h="gh-pages";a.itemName="undefined"!=typeof e.item?e.item:void 0,a.filename=a.itemName,console.log(a.filename);var i=d.getCurrentUser().githubToken,j=new Github({token:i,auth:"oauth"}),k=d.getCurrentUser().repoURI,l=k.match(/git:\/\/github\.com\/([^/]+)\/(.+?)\.git$/);a.username=l[1],a.repo=l[2];var m=j.getRepo(l[1],l[2]),n=function(){m.getTree(h,function(b,c){var d=[];angular.forEach(c,function(a){"tree"===a.type&&d.push(a)}),a.directories=[],angular.forEach(d,function(b){m.getCommits({path:b.path+"/index.html"},function(c,d){if(d){var e=d.sort(function(a,b){return Date(a.commit.committer.date)>Date(b.commit.committer.date)});b.updated=e[0].commit.committer.date,a.directories.push(b),a.$apply()}})})})};a.itemName?m.read(h,a.itemName+"/axis.json",function(d,e){d?(b.alert("This isn't an Axis chart!"),c.path="/edit"):(a.axisConfig=e,m.getRef("heads/"+h,function(b,c){c&&(a.sha=c,a.$apply())}),a.$apply())}):n(),a.editChart=function(a){c.path("/edit/"+a)},a.deleteChart=function(a){m.remove(h,a+"/axis.json",function(b){b&&console.dir(b),m.remove(h,a+"/index.html",function(a){a&&console.dir(a),n()})})};var o=function(b){""!==a.filename&&"undefined"!=typeof a.filename&&g.get("/app/preview/preview.html").success(function(c){var d=new Date;m.write(a.branch,a.filename+"/axis.json",b.config,"Updated "+d.toISOString(),function(b,e){var g="https://cdn.rawgit.com/"+l[1]+"/"+l[2]+"/"+e.commit.sha+"/"+a.filename+"/axis.json",h=c.replace(/\{\{axisJSON\}\}/,g);m.write(a.branch,a.filename+"/index.html",h,"Updated "+d.toISOString(),function(b,c){console.dir(c);var d="https://cdn.rawgit.com/"+l[1]+"/"+l[2]+"/"+c.commit.sha+"/"+a.filename+"/index.html";f.open({templateUrl:"components/modal/modal.html",controller:["$scope","$modalInstance","$sce",function(a,b,c){a.modal={},a.modal.title="Updated chart!",a.modal.dismissable=!0,a.modal.html=c.trustAsHtml('<iframe src="'+d+'" width="100%" height="100%"></iframe><br><a href="'+d+"?"+Date.now()+'" target="_blank">Open in new window <i class="fa fa-search-plus"></i></a>'),a.iframeWidth="100%",a.iframeHeight="400px";var e=function(a){return a.indexOf("%")>-1?a:parseInt(a)};a.getiFrameCode=function(){return a.iframeCode='<iframe src="'+d+'" width="'+e(a.iframeWidth)+'" height="'+e(a.iframeHeight)+'"></iframe>'},a.getiFrameCode()}]})})})})};angular.element(b).bind("message",function(a){var b=angular.fromJson(a.originalEvent.data);o(b)})}]),angular.module("axismakerApp").controller("MainCtrl",["$scope","$http",function(){}]),angular.module("axismakerApp").controller("MainCtrl",["Auth","$scope","$location","User",function(a,b,c,d){b.isLoggedIn=a.isLoggedIn,b.repoSet=!1;b.isLoggedIn()&&d.get().$promise.then(function(a){console.log(a),"undefined"!=typeof a.repoURI?b.repoSet=!0:c.path("/settings")})}]).config(["$tooltipProvider",function(a){a.setTriggers({invalidFilename:"validFilename"})}]),angular.module("axismakerApp").controller("NewCtrl",["$scope","Auth","$compile","$window","$modal","$http",function(a,b,c,d,e,f){d.axisConfig=void 0,a.branch="gh-pages",a.token=b.getCurrentUser().githubToken,a.github=new Github({token:a.token,auth:"oauth"}),a.currentRepoURI=b.getCurrentUser().repoURI,a.repoName=a.currentRepoURI.match(/git:\/\/github\.com\/([^/]+)\/(.+?)\.git$/),a.filename="",a.isInvalid=function(){return a.filename.$invalid};var g=a.github.getRepo(a.repoName[1],a.repoName[2]),h=function(b){""!==a.filename&&f.get("/app/preview/preview.html").success(function(c){g.write(a.branch,a.filename+"/axis.json",b.config,"initial config -- "+a.filename,function(b,d){var f="https://cdn.rawgit.com/"+a.repoName[1]+"/"+a.repoName[2]+"/"+d.commit.sha+"/"+a.filename+"/axis.json",h=c.replace(/\{\{axisJSON\}\}/,f);g.write(a.branch,a.filename+"/index.html",h,"initial template -- "+a.filename,function(b,c){var d="https://cdn.rawgit.com/"+a.repoName[1]+"/"+a.repoName[2]+"/"+c.commit.sha+"/"+a.filename+"/index.html";e.open({templateUrl:"components/modal/modal.html",controller:["$scope","$sce",function(a,b){a.modal={},a.modal.title="Your finished chart",a.modal.html=b.trustAsHtml('<iframe src="'+d+'" width="100%" height="100%"></iframe><br><a href="'+d+'" target="_blank">Open in new window <i class="fa fa-search-plus"></i></a>')}]})})})})};angular.element(d).bind("message",function(a){var b=angular.fromJson(a.originalEvent.data);h(b)})}]),angular.module("axismakerApp").controller("PreviewCtrl",["$scope",function(a){a.config.title="",a.config.config={}}]),angular.module("axismakerApp").config(["$stateProvider",function(a){a.state("preview",{url:"/preview",templateUrl:"app/preview/preview/preview.html",controller:"PreviewCtrl"})}]),angular.module("axismakerApp").factory("Auth",["$location","$rootScope","$http","User","$cookieStore","$q",function(a,b,c,d,e,f){var g={};return e.get("token")&&(g=d.get()),{login:function(a,b){var h=b||angular.noop,i=f.defer();return c.post("/auth/local",{email:a.email,password:a.password}).success(function(a){return e.put("token",a.token),g=d.get(),i.resolve(a),h()}).error(function(a){return this.logout(),i.reject(a),h(a)}.bind(this)),i.promise},logout:function(){e.remove("token"),g={}},createUser:function(a,b){var c=b||angular.noop;return d.save(a,function(b){return e.put("token",b.token),g=d.get(),c(a)},function(a){return this.logout(),c(a)}.bind(this)).$promise},changePassword:function(a,b,c){var e=c||angular.noop;return d.changePassword({id:g._id},{oldPassword:a,newPassword:b},function(a){return e(a)},function(a){return e(a)}).$promise},changeRepo:function(a,b){var c=b||angular.noop;return d.changeRepo({id:g._id},{repoURI:a},function(a){return c(a)},function(a){return c(a)}).$promise},getCurrentUser:function(){return g},isLoggedIn:function(){return g.hasOwnProperty("role")},isLoggedInAsync:function(a){g.hasOwnProperty("$promise")?g.$promise.then(function(){a(!0)})["catch"](function(){a(!1)}):a(g.hasOwnProperty("role")?!0:!1)},isAdmin:function(){return"admin"===g.role},getToken:function(){return e.get("token")}}}]),angular.module("axismakerApp").factory("User",["$resource",function(a){return a("/api/users/:id/:controller",{id:"@_id"},{changePassword:{method:"PUT",params:{controller:"password"}},changeRepo:{method:"PUT",params:{controller:"repo"}},get:{method:"GET",params:{id:"me"}}})}]),angular.module("axismakerApp").directive("c3Demo",["$timeout",function(a){return{templateUrl:"components/c3Demo/c3Demo.html",restrict:"EA",link:function(){var b=c3.generate({data:{columns:[["data1",120,140,170,150,180],["data2",80,50,100,70,120],["data3",180,120]],type:"line"}});a(function(){b.load({columns:[["data1",20,40,70,50,80],["data2",180,150,120,170,200],["data3",400,310,470,400,380]]})},1e3),a(function(){b.load({columns:[["data1",130,120,150,140,160,150],["data4",30,20,50,40,60,50]],unload:["data2","data3"]})},2e3),a(function(){b.load({rows:[["data2","data3"],[120,300],[160,240],[200,290],[160,230],[130,300],[220,320]],unload:"data4"})},3e3),a(function(){b.load({columns:[["data4",30,20,50,40,60,50,100,200]],type:"bar"})},4e3),a(function(){b.unload({ids:"data4"})},5e3),a(function(){b.load({columns:[["data2",null,30,20,50,40,60,50]]})},6e3),a(function(){b.unload()},7e3),a(function(){b.load({rows:[["data4","data2","data3"],[90,120,300],[40,160,240],[50,200,290],[120,160,230],[80,130,300],[90,220,320]],type:"bar"})},8e3),a(function(){b.load({rows:[["data5","data6"],[190,420],[140,460],[150,500],[220,460],[180,430],[190,520]],type:"line"})},9e3),a(function(){b.unload({ids:["data2","data3"]})},1e4)}}}]),angular.module("axismakerApp").directive("loadChart",function(){return{restrict:"A",link:function(a,b){a.$watch("axisConfig",function(c){c&&(window.axisConfig=a.axisConfig,b.attr("src","bower_components/axisJS/dist/index.html?config=axismaker"))})}}}),angular.module("axismakerApp").factory("Modal",["$rootScope","$modal",function(a,b){function c(c,d){var e=a.$new();return c=c||{},d=d||"modal-default",angular.extend(e,c),b.open({templateUrl:"components/modal/modal.html",windowClass:d,scope:e})}return{confirm:{"delete":function(a){return a=a||angular.noop,function(){var b,d=Array.prototype.slice.call(arguments),e=d.shift();b=c({modal:{dismissable:!0,title:"Confirm Delete",html:"<p>Are you sure you want to delete <strong>"+e+"</strong> ?</p>",buttons:[{classes:"btn-danger",text:"Delete",click:function(a){b.close(a)}},{classes:"btn-default",text:"Cancel",click:function(a){b.dismiss(a)}}]}},"modal-danger"),b.result.then(function(b){a.apply(b,d)})}}}}}]),angular.module("axismakerApp").directive("mongooseError",function(){return{restrict:"A",require:"ngModel",link:function(a,b,c,d){b.on("keydown",function(){return d.$setValidity("mongoose",!0)})}}}),angular.module("axismakerApp").controller("NavbarCtrl",["$scope","$location","Auth","$window",function(a,b,c,d){a.menu=[{title:"New",link:"/new",icon:"fa-file-image-o"},{title:"Edit",link:"/edit",icon:"fa-folder-open-o"}],a.isCollapsed=!0,a.isLoggedIn=c.isLoggedIn,a.isAdmin=c.isAdmin,a.getCurrentUser=c.getCurrentUser,a.logout=function(){c.logout(),b.path("/")},a.isActive=function(a){return a===b.path()},a.loginOauth=function(a){d.location.href="/auth/"+a}}]),angular.module("axismakerApp").directive("validateFilename",["$q","$anchorScroll","$location",function(a){return{restrict:"A",require:"ngModel",link:function(b,c,d,e){e.$asyncValidators.validateFilename=function(c){var d=a.defer();if(b.github&&c.length){var e=b.github.getRepo(b.repoName[1],b.repoName[2]),f=c+"/index.html";e.getSha(b.branch,f,function(a,c){console.clear(),c?(b.$emit("invalidFilename"),b.popoverText="Please choose a unique name for the chart.",angular.element("body").scrollTop(0),d.reject()):(b.$emit("validFilename"),d.resolve())})}else d.reject();return d.promise}}}}]),angular.module("axismakerApp").run(["$templateCache",function(a){a.put("app/account/login/login.html",'<div ng-include="\'components/navbar/navbar.html\'"></div><div class=container><div class=row><div class=col-sm-12><p>You need a <a href=http://www.github.com>GitHub</a> account to use Axismaker. If you don\'t have one, please <a href=https://github.com/join>create one here</a>.</p></div><div class=col-sm-12><div><a class="btn btn-github" href="" ng-click="loginOauth(\'github\')"><i class="fa fa-github"></i> Connect with GitHub</a></div></div></div><hr></div>'),a.put("app/account/settings/settings.html",'<div ng-include="\'components/navbar/navbar.html\'"></div><div class=container><div class=row><div ng-if=!currentRepoURI class="alert alert-warning" role=alert>You need to set a GitHub repo to be used with Axis.<br>Please choose below, or create a new repo.<br><br><strong>Note: We are not responsible for what happens if you use an existing repo!</strong></div><div class=col-sm-12 ng-if=!!currentRepoURI><h1>GitHub Repo <i class="fa fa-github"></i></h1><h3><i class="fa fa-check-circle"></i> <a ng-href="{{currentRepoURI.replace(\'git://\', \'https://\')}}">{{currentRepoURI}}</a></h3></div><div class=col-sm-12><br><button new-repo class="btn btn-success" ng-click="showNewRepo = !showNewRepo">New repo <i class="fa fa-plus-square"></i></button><div>{{newRepoMessages}}</div><br><table class="repo-table table table-hover"><!-- TODO implement datatables  <table datatable class="repo-table table table-hover"> --><thead><tr><th></th><th><i class="fa fa-github"></i> repo</th><th>url</th><th>owner</th><th>permissions</th><th>created</th></tr></thead><tbody><tr class=newRepo ng-show=showNewRepo><td colspan=6><div class=input-group><input class=form-control placeholder="Repo name..." ng-model=newRepoName> <span class=input-group-btn><button class="btn btn-success" type=button ng-click=createNewRepo()>Save</button></span></div><!-- /input-group --></td></tr><tr ng-repeat="repo in writableRepos" ng-style="currentRepoURI === repo.git_url ? {\'font-weight\': \'bold\'} : {\'font-weight\': \'normal\'}"><td><button class="btn btn-xs" ng-class="{\'btn-success\': currentRepoURI !== repo.git_url, \'btn-primary\': currentRepoURI === repo.git_url}" ng-disabled="currentRepoURI === repo.git_url" ng-click=changeRepo(repo.git_url)><span ng-if="currentRepoURI !== repo.git_url">Use</span> <span ng-if="currentRepoURI === repo.git_url">Selected</span> <i ng-class="{\'fa-check-circle\': currentRepoURI !== repo.git_url, \'fa-check-circle-o\': currentRepoURI === repo.git_url}" class=fa></i></button></td><td>{{repo.full_name}}</td><td>{{repo.git_url}}</td><td>{{repo.owner.login}}</td><td class=permissions><strong ng-class="{hasPermission: repo.permissions.admin}"><i class="fa fa-cogs"></i></strong> <strong ng-class="{hasPermission: repo.permissions.push}"><i class="fa fa-pencil-square-o"></i></strong> <strong ng-class="{hasPermission: repo.permissions.pull}"><i class="fa fa-book"></i></strong></td><td>{{repo.created_at}}</td></tr></tbody></table></div><!--     <div class="col-sm-12">\n      <form class="form" name="form" ng-submit="changePassword(form)" novalidate>\n\n        <div class="form-group">\n          <label>Current Password</label>\n\n          <input type="password" name="password" class="form-control" ng-model="user.oldPassword"\n                 mongoose-error/>\n          <p class="help-block" ng-show="form.password.$error.mongoose">\n              {{ errors.other }}\n          </p>\n        </div>\n\n        <div class="form-group">\n          <label>New Password</label>\n\n          <input type="password" name="newPassword" class="form-control" ng-model="user.newPassword"\n                 ng-minlength="3"\n                 required/>\n          <p class="help-block"\n             ng-show="(form.newPassword.$error.minlength || form.newPassword.$error.required) && (form.newPassword.$dirty || submitted)">\n            Password must be at least 3 characters.\n          </p>\n        </div>\n\n        <p class="help-block"> {{ message }} </p>\n\n        <button class="btn btn-lg btn-primary" type="submit">Save changes</button>\n      </form>\n    </div> --></div></div>'),a.put("app/account/signup/signup.html",'<div ng-include="\'components/navbar/navbar.html\'"></div><div class=container><div class=row><div class=col-sm-12><h1>Sign up</h1></div><div class=col-sm-12><h4>Login with GitHub to save and host charts</h4><a class="btn btn-github" href="" ng-click="loginOauth(\'github\')"><i class="fa fa-github"></i> Connect with GitHub</a></div></div><hr></div>'),a.put("app/admin/admin.html",'<div ng-include="\'components/navbar/navbar.html\'"></div><div class=container><p>The delete user and user index api routes are restricted to users with the \'admin\' role.</p><ul class=list-group><li class=list-group-item ng-repeat="user in users"><strong>{{user.name}}</strong><br><span class=text-muted>{{user.email}}</span> <a ng-click=delete(user) class=trash><span class="glyphicon glyphicon-trash pull-right"></span></a></li></ul></div>'),a.put("app/main/edit/edit.html",'<div ng-include="\'components/navbar/navbar.html\'"></div><div class="container axisJS"><div class=row><div class=col-sm-12><h1>Edit <i class="fa fa-folder-open-o"></i></h1><!-- Display item list if no URL argument --><div class=col-sm-12 ng-show="!itemName && directories"><table class="item-table table table-hover"><thead><tr><th></th><th>name</th><th>modified</th><th>remove</th></tr></thead><tbody><tr ng-repeat="directory in directories | orderBy: \'-updated\'"><td><button class="btn btn-success btn-xs" ng-click=editChart(directory.path)>Edit <i class="fa fa-pencil-square"></i></button></td><td>{{directory.path}}</td><td>{{directory.updated}}</td><td><button class="btn btn-danger btn-xs" ng-click=deleteChart(directory.path)><i class="fa fa-times"></i></button></td></tr></tbody></table></div><!-- Display axisJS if argument given --><div ng-show=!!itemName><h4>Editing: <a ng-href="https://cdn.rawgit.com/{{username}}/{{repo}}/{{sha.substr(0, 7)}}/{{filename}}/index.html">{{itemName}}</a> - <small><a ng-href="https://cdn.rawgit.com/{{username}}/{{repo}}/{{sha.substr(0, 7)}}/{{filename}}/index.html">{{username}}/{{repo}}/{{sha.substr(0, 7)}}/{{filename}}</a></small></h4><iframe load-chart id=axisJS border=0 width=100% height=auto></iframe></div></div></div></div>'),a.put("app/main/main.html",'<div ng-include="\'components/navbar/navbar.html\'"></div><div ng-if=!isLoggedIn()><header class=hero-unit id=banner><h1>Use AxisJS online <em>for free</em></h1><!-- <slick infinte="true" arrows="false" dots="false" autoplay="true" class="carousel" autoplay-speed="3000" speed="1000"></slick> --><div class=container><div><c3-demo></c3-demo><p class=lead>Create interactive charts with <strong>AxisJS</strong>...</p></div><div><p class=lead>...and host them for free on <i class="fa fa-github"></i></p></div></div></header></div><div ng-if=isLoggedIn()><header class=hero-unit id=banner><div class=container><h1>Welcome to Axis!</h1><h5 ng-if=!repoSet>Note: You still need to set a GitHub repo to use <a href=/settings>here</a>!</h5><div class="row options" ng-if=repoSet><div class="new col-xs-6"><a ng-href=/new><i class="fa-file-image-o fa fa-5x"></i><br>New</a></div><div class="edit col-xs-6"><a ng-href=/edit><i class="fa-folder-open-o fa fa-5x"></i><br>Edit</a></div></div></div></header></div><section class=container><h2>A project by...</h2><br><div class="row project-by"><div class=col-xs-4><a href=http://www.thetimes.co.uk><img src="assets/images/b3f31425.Times_Masthead_white.png"></a><br><a href=http://www.thesundaytimes.co.uk><img src="assets/images/2d35436f.sunday-times-magazine-masthead.png"></a></div><div class=col-xs-4><a href=http://www.thetimes.co.uk/redbox><img src="assets/images/ad6e1855.redbox.png"></a></div><div class=col-xs-4><a href=http://www.thesundaytimes.co.uk><img src="assets/images/07ec1824.robot.png"></a></div></div></section><footer class=footer><div class=container><p>AxisMaker | <a href=https://twitter.com/aendrew>Ã†ndrew Rininsland (@aendrew)</a>, <a href="https://medium.com/digital-times/">Times Digital Development</a> | <a href="https://github.com/aendrew/axisbuilder/issues?state=open">Issues</a></p><p><small>Although we totally <i class="fa fa-heart"></i> <i class="fa fa-github"></i>, neither <a href=http:/www.axisjs.org>AxisJS</a>, AxisMaker, <a href=http://www.thetimes.co.uk>The Times</a> nor <a href=http://thesundaytimes.co.uk>Sunday Times</a> is affiliated with <a href=https://github.com>GitHub</a>.</small></p></div></footer>'),a.put("app/main/new/new.html",'<div ng-include="\'components/navbar/navbar.html\'"></div><div class="container axisJS"><div class=row><div class=col-sm-12><h1>New <i class="fa fa-file-image-o"></i></h1><form name=filenameForm><div class=form-group ng-class="{\'has-error\': filenameForm.filename.$invalid, \'has-success\': !filenameForm.filename.$invalid}"><label class=control-label for=filename>Project name</label><input popover={{popoverText}} popover-placement=bottom popover-show={{filenameForm.filename.$invalid}} name=filename ng-model=filename ng-model-options="{ updateOn: \'mousedown blur\' }" placeholder="Please enter a project name here" validate-filename class=form-control id=filename></div></form><iframe id=axisJS src="bower_components/axisJS/dist/index.html?config=axismaker" border=0 width=100% height=auto></iframe></div></div></div>'),a.put("app/preview/preview.html","<!doctype html><html><head><link rel=stylesheet href=\"//cdnjs.cloudflare.com/ajax/libs/c3/0.4.10/c3.min.css\"></head><body><div id=chart></div><script src=//cdnjs.cloudflare.com/ajax/libs/d3/3.5.3/d3.min.js></script><script src=//cdnjs.cloudflare.com/ajax/libs/c3/0.4.10/c3.min.js></script><script>(function(){\n        d3.xhr('{{axisJSON}}', 'text/plain', function(err, res){\n          var config = JSON.parse(res.responseText);\n          // If you can figure out how to do this better, please talk to @aendrew.\n          config.axis.x.tick.format = function (b){return'series'===config.chartGlobalType&&'category'!==config.axis.x.type?config.axis.x.prefix+b.toFixed(config.axis.x.accuracy).toString()+config.axis.x.suffix:b;};\n          config.axis.y.tick.format = function (b){return'series'===config.chartGlobalType&&'category'!==config.axis.y.type?config.axis.y.prefix+b.toFixed(config.axis.y.accuracy).toString()+config.axis.y.suffix:b;};\n          config.axis.y2.tick.format = function (b){return'series'===config.chartGlobalType&&'category'!==config.axis.y2.type?config.axis.y2.prefix+b.toFixed(config.axis.y2.accuracy).toString()+config.axis.y2.suffix:b;};\n          config.donut.label.format = function (b,c){return(100*c).toFixed(config.chartAccuracy)+'%';};\n          config.pie.label.format = function (b,c){return(100*c).toFixed(config.chartAccuracy)+'%';};\n          config.gauge.label.format = function (b,c){return(100*c).toFixed(config.chartAccuracy)+'%';};\n          window.chart = c3.generate(config);\n        });\n      })();</script></body></html>"),a.put("components/c3Demo/c3Demo.html","<div id=chart></div>"),a.put("components/modal/modal.html",'<div class=modal-header><button ng-if=modal.dismissable type=button ng-click=$dismiss() class=close>&times;</button><h4 ng-if=modal.title ng-bind=modal.title class=modal-title></h4></div><div class=modal-body><p ng-if=modal.text ng-bind=modal.text></p><div ng-if=modal.html ng-bind-html=modal.html></div></div><div class=modal-footer><textarea class=form-control rows=3 ng-click=this.select() ng-model=iframeCode></textarea><div class=row><div class=col-xs-6><label>Width</label><input class=form-control ng-model=iframeWidth ng-change="getiFrameCode()"></div><div class=col-xs-6><label>Height</label><input class=form-control ng-model=iframeHeight ng-change="getiFrameCode()"></div></div><button ng-repeat="button in modal.buttons" ng-class=button.classes ng-click=button.click($event) ng-bind=button.text class=btn></button></div>'),a.put("components/navbar/navbar.html",'<div class="navbar navbar-inverse navbar-static-top" ng-controller=NavbarCtrl><div class=container><div class=navbar-header><button class=navbar-toggle type=button ng-click="isCollapsed = !isCollapsed"><span class=sr-only>Toggle navigation</span> <span class=icon-bar></span> <span class=icon-bar></span> <span class=icon-bar></span></button> <a href="/" class=navbar-brand>Axis <i class="fa fa-line-chart"></i></a></div><div collapse=isCollapsed class="navbar-collapse collapse" id=navbar-main><ul class="nav navbar-nav"><li ng-show=isLoggedIn() ng-repeat="item in menu" ng-class="{active: isActive(item.link)}"><a ng-href={{item.link}}>{{item.title}} <i ng-class="\'fa \' + item.icon"></i></a></li><li ng-show=isAdmin() ng-class="{active: isActive(\'/admin\')}"><a href=/admin>Admin</a></li></ul><ul class="nav navbar-nav navbar-right"><li ng-hide=isLoggedIn() ng-class="{active: isActive(\'/login\')}"><a ng-click="loginOauth(\'github\')" href=#>Login with GitHub <i class="fa fa-github"></i></a></li><li ng-show=isLoggedIn()><p class=navbar-text>{{ getCurrentUser().name }}&nbsp;&nbsp;<img ng-src={{getCurrentUser().github.avatar_url}} width=16></p></li><li ng-show=isLoggedIn() ng-class="{active: isActive(\'/settings\')}"><a href=/settings><span class="glyphicon glyphicon-cog"></span></a></li><li ng-show=isLoggedIn() ng-class="{active: isActive(\'/logout\')}"><a href="" ng-click=logout()>Logout</a></li></ul></div></div></div>')}]);